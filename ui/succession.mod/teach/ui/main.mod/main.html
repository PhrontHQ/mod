<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Teach Succession Mod</title>

    <link rel="stylesheet" href="main.css">

    <script type="text/mod-serialization">
    {
        "owner": {
            "values": {
                "element": {"#": "Main"},
                "succession1": {"@": "succession1"}
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {"@": "owner"}
                }
            ]
        },
        "succession1": {
            "prototype": "mod/ui/succession.mod",
            "values": {
                "element": {"#": "succession1"}
            },
            "listeners": [
                {
                    "type": "buildInEnd",
                    "listener": {"@": "owner"}
                },
                {
                    "type": "buildOutEnd",
                    "listener": {"@": "owner"}
                }
            ]
        },
        "succession1DefaultContent": {
            "prototype": "ui/foo.mod",
            "values": {
                "element": {"#": "succession1DefaultContent"}
            }
        },
        "push": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "push"}
            }
        },
        "pushx5": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "pushx5"}
            }
        },
        "pop": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "pop"}
            }
        },
        "popx5": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "popx5"}
            }
        },
        "contentComponent": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "contentComponent"}
            }
        },
        "contentNull": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "contentNull"}
            }
        },
        "multiOp": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "multiOp"}
            }
        },
        "toggleOverflow": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "toggleOverflow"}
            }
        },
        "setSuccessionBuildInOut": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "setSuccessionBuildInOut"}
            }
        },
        "clearSuccessionBuildInOut": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "clearSuccessionBuildInOut"}
            }
        },
        "disableSuccessionBuildInOut": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "disableSuccessionBuildInOut"}
            }
        },


        "stack": {
            "prototype": "mod/ui/repetition.mod",
            "values": {
                "element": {"#": "stack"},
                "content": {"<-": "@succession1.history.reversed()"}
            }
        },
        "lastBuildInComponentIdentifier": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "lastBuildInComponentIdentifier"},
                "value": {"<-": "@owner.lastBuildInComponentIdentifier"}
            }
        },
        "lastBuildOutComponentIdentifier": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "lastBuildOutComponentIdentifier"},
                "value": {"<-": "@owner.lastBuildOutComponentIdentifier"}
            }
        },
        "buildInOverride": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "buildInOverride"},
                "value": {"<-": "@succession1.contentBuildInCssClass || 'none'"}
            }
        },
        "buildOutOverride": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "buildOutOverride"},
                "value": {"<-": "@succession1.contentBuildOutCssClass || 'none'"}
            }
        },
        "displayTitle": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "displayTitle"},
                "value": {"<-": "@stack:iteration.object.title ?? 'N/A'"}
            }
        },
        "animation": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "animation"},
                "value": {"<-": "@stack:iteration.object.buildInCssClass + ' ' + @stack:iteration.object.buildInTransitionCssClass + ' ' + @stack:iteration.object.buildOutCssClass"}
            }
        },
        "animationOverride": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "animationOverride"},
                "value": {"<-": "@stack:iteration.object.buildInCssClassOverride + ' ' + @stack:iteration.object.buildInTransitionCssClassOverride + ' ' + @stack:iteration.object.buildOutCssClassOverride"}
            }
        },


        "select": {
            "prototype": "mod/ui/select.mod",
            "values": {
                "element": {"#": "select"},
                "content": [
                    {"value": "Foo"},
                    {"value": "Bar"}
                ],
                "value": "Foo"
            }
        },
        "SubstitutionMultiOp": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "SubstitutionMultiOp"}
            }
        },
        "substitution": {
            "prototype": "mod/ui/substitution.mod",
            "values": {
                "element": {"#": "substitution"},
                "switchValue": {
                    "<->": "@select.value"
                }
            }
        },
        "FooForSubstitution": {
            "prototype": "ui/foo.mod",
            "values": {
                "element": {"#": "FooForSubstitution"}
            }
        },
        "BarForSubstitution": {
            "prototype": "ui/bar.mod",
            "values": {
                "element": {"#": "BarForSubstitution"}
            }
        },


        "detach": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "detach"}
            }
        },
        "Bar2": {
            "prototype": "ui/bar.mod",
            "values": {
                "element": {"#": "Bar2"}
            }
        },
        "text": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "text"},
                "value": "Hello World.",
                "buildInCssClass": "transition-build-in",
                "buildInTransitionCssClass": "transition",
                "buildOutCssClass": "transition-build-out"
            }
        },

        "Slot": {
            "prototype": "mod/ui/slot.mod",
            "values": {
                "element": {"#": "Slot"},
                "content": {"@": "Bar3"},
                "buildInCssClass": "slideInDown"
            }
        },
        "Bar3": {
            "prototype": "ui/bar.mod",
            "values": {
                "element": {"#": "Bar3"},
                "buildInCssClass": null,
                "buildInTransitionCssClass": null
            }
        },


        "Container": {
            "prototype": "mod/ui/component[Component]",
            "values": {
                "element": {"#": "Container"},
                "hasTemplate": false
            }
        },
        "innerText": {
            "prototype": "mod/ui/text.mod",
            "values": {
                "element": {"#": "innerText"},
                "value": "Text Inside Empty Component"
            }
        },

        "conditionToggle": {
            "prototype": "mod/ui/button.mod",
            "values": {
                "element": {"#": "conditionToggle"}
            }
        },
        "condition": {
            "prototype": "mod/ui/condition.mod",
            "values": {
                "element": {"#": "condition"},
                "condition": true
            }
        },
        "baz": {
            "prototype": "ui/baz.mod",
            "values": {
                "element": {"#": "baz"}
            }
        }
    }
    </script>
</head>
<body>
    <div data-mod-id="Main" class="main">
        <button data-mod-id="detach">Detach from Component tree</button>

        <h2>Stand-alone components declared in serialization</h2>
        <div data-mod-id="Bar2" style="position: static;"></div>
        <h3 data-mod-id="text"></h3>

        <h2>domContent Test w/o Slot</h2>
        <div data-mod-id="Container" style="border: 1px blue solid; height: 50px;"></div>
        <h3 data-mod-id="innerText"></h3>

        <h2>Nested animating components with inner's buildIn disabled</h2>
        <div class="wrapper">
            <div data-mod-id="Slot" class="slot wrapper">
                <div data-mod-id="Bar3"
                     style="background: darkblue; width: 90%; height: 90%; opacity: 0.5; position: static;">
                </div>
            </div>
        </div>

        <h2>Inside Succession with overridden animation</h2>
        <br>
        <div>
            <button data-mod-id="push">Push</button>
            <button data-mod-id="pushx5">Push x5</button>
            <button data-mod-id="pop">Pop</button>
            <button data-mod-id="popx5">Pop x5</button>
            <button data-mod-id="contentComponent">Set content to component</button>
            <button data-mod-id="contentNull">Set content to null</button>
            <button data-mod-id="multiOp">push x10 pop x5</button>
        </div>
        <br/>
        <div>
            <button data-mod-id="toggleOverflow">Toggle Container Overflow</button>
            <button data-mod-id="setSuccessionBuildInOut">Set Succession builds to CSS animation</button>
            <button data-mod-id="clearSuccessionBuildInOut">Clear builds (undefined)</button>
            <button data-mod-id="disableSuccessionBuildInOut">Disable builds (null)</button>
        </div>

        <div class="wrapper">
            <div data-mod-id="succession1" class="succession container overflow-hidden">
                <div data-mod-id="succession1DefaultContent" data-arg="content"></div>
            </div>
            <div class="stack">
                Build-in Override: <code data-mod-id="buildInOverride"></code>
                <br/>
                Build-out Override: <code data-mod-id="buildOutOverride"></code>
                <br/>
                Heard from event:
                <br>
                Last component built-in: <code data-mod-id="lastBuildInComponentIdentifier"></code>
                <br/>
                Last component built-out: <code data-mod-id="lastBuildOutComponentIdentifier"></code>

                <h3>The stack</h3>
                <ul data-mod-id="stack">
                    <li>
                        <div>
                            <span data-mod-id="displayTitle"></span>
                            <br>
                            <span data-mod-id="animation"></span>
                            <br>
                            <span data-mod-id="animationOverride"></span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <h2>Inside Substitution</h2>
        <select data-mod-id="select"></select>
        <button data-mod-id="SubstitutionMultiOp">Switch 3 times between 2 items in 500ms</button>
        <div class="wrapper">
            <div data-mod-id="substitution" class="container overflow-hidden">
                <div data-mod-id="FooForSubstitution" data-arg="Foo"></div>
                <div data-mod-id="BarForSubstitution" data-arg="Bar"></div>
            </div>
        </div>

        <h2>Condition, CSS transition, access getComputedStyle properties in willDraw</h2>
        <button data-mod-id="conditionToggle">Toggle</button>
        <div class="wrapper">
            <div class="container overflow-hidden">
                <div data-mod-id="condition">
                    <div data-mod-id="baz"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
