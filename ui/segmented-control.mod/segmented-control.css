:root {
    /* Segmented Control */
    --mod-segmented-control-padding: 2px;

    /* Thumb */
    --mod-segmented-control-thumb-shadow: 0px 0px 3px 1px rgba(0, 0, 0, 0.04);
    --mod-segmented-control-thumb-transition: all 0.35s cubic-bezier(0.375, 0.075, 0, 1.115);

    /* Segment */
    --mod-segment-transition: color 0.25s ease-out, background-color 0.25s ease-out;

    /* Segment Hover State */
    --mod-segment-hover-text: rgba(0, 0, 0, 1);

    /* Segment Active State */
    --mod-segment-active-text: rgba(0, 0, 0, 1);
}

.ModSegmentedControl {
    display: flex;
    -webkit-tap-highlight-color: transparent;

    > .ModSegmentedControl-container {
        display: flex;
        background-color: var(--visual-style-control-background-fill);
        padding: var(--mod-segmented-control-padding); /** TODO Incorporate into visual-style? **/
        position: relative;
        flex: 1;
        border-radius: var(--visual-style-control-border-radius);

        > .ModSegmentedControl-thumb {
            position: absolute;
            top: var(--mod-segmented-control-padding);
            left: var(--mod-segmented-control-padding);
            background: var(--visual-style-control-selection-fill);
            backdrop-filter: blur(10px);
            border: 2px solid var(--visual-style-control-border-color);
            box-sizing: border-box;
            box-shadow: var(--visual-style-control-thumb-shadow); /** TODO Incorporate into visual-style? **/
            z-index: 1;
            pointer-events: none;
            height: calc(100% - var(--mod-segmented-control-padding) * 2);
        }

        > .ModSegmentedControl-segments {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            overflow: hidden;
            position: relative;
            flex: 1;
            justify-content: space-around;

            > .ModSegmentedControl-segment {
                flex: 1;
                padding: 0.25rem 0.5rem;
                min-height: 2.25rem;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--visual-style-text-fill);
                cursor: pointer;
                transition: var(--mod-segment-transition);
                z-index: 2;
                box-sizing: border-box;
                white-space: nowrap;
                -webkit-user-select: none;
                user-select: none;
                outline: none;
                border: none;
                background: transparent;
                font-family: inherit;
                font-size: 1rem;
                gap: 0.5rem;

                &:hover:not(.mod--selected) {
                    background-color: var(--visual-style-control-hover-fill);
                    color: var(--mod-segment-hover-text);
                }

                &:active:not(.mod--selected) {
                    background-color: var(--visual-style-control-active-fill);
                    color: var(--mod-segment-active-text);
                }

                &.mod--selected {
                    color: var(--visual-style-text-fill);
                }

                > * {
                    pointer-events: none;
                    user-select: none;
                }
            }
        }

        > .ModSegmentedControl-thumb,
        > .ModSegmentedControl-segments > .ModSegmentedControl-segment {
            border-radius: calc(var(--visual-style-control-border-radius) - var(--mod-segmented-control-padding));
        }
    }

    &.mod--disabled {
        opacity: 0.6;
        pointer-events: none;
        cursor: not-allowed;
    }

    &.mod--readyForAnimation {
        > .ModSegmentedControl-container {
            > .ModSegmentedControl-thumb {
                transition: var(--mod-segmented-control-thumb-transition);
            }
        }
    }

    /* "Compact Mode" (e.g., for narrow containers) */
    @container (max-width: 400px) {
        > .ModSegmentedControl-container {
            > .ModSegmentedControl-segments {
                > .ModSegmentedControl-segment {
                    padding: 0.2rem 0.4rem;
                    font-size: 0.75rem;
                    min-height: 2rem;
                    gap: 0.25rem;
                }
            }
        }
    }
}
